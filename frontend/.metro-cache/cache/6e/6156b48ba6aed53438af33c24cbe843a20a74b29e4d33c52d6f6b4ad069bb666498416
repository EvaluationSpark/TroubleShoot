{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"expo-crypto","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":149},"end":{"line":3,"column":38,"index":187}}],"key":"+Akla+LrhuGGU54C9zXxLPlFUv4=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/app/contexts/UserContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  exports.UserProvider = UserProvider;\n  exports.useUser = useUser;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _expoCrypto = require(_dependencyMap[2], \"expo-crypto\");\n  var Crypto = _interopNamespace(_expoCrypto);\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const UserContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const USER_ID_KEY = '@fixintel_user_id';\n  function UserProvider({\n    children\n  }) {\n    const [userId, setUserIdState] = (0, _react.useState)('');\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      loadOrCreateUserId();\n    }, []);\n    const loadOrCreateUserId = async () => {\n      try {\n        // Try to load existing user ID\n        let storedUserId = await AsyncStorage.default.getItem(USER_ID_KEY);\n        if (!storedUserId) {\n          // Generate a new unique user ID using expo-crypto\n          const randomBytes = await Crypto.getRandomBytesAsync(16);\n          storedUserId = Array.from(randomBytes).map(b => b.toString(16).padStart(2, '0')).join('');\n\n          // Save it for future use\n          await AsyncStorage.default.setItem(USER_ID_KEY, storedUserId);\n          console.log('[User] Created new user ID:', storedUserId);\n        } else {\n          console.log('[User] Loaded existing user ID:', storedUserId);\n        }\n        setUserIdState(storedUserId);\n      } catch (error) {\n        console.error('[User] Error loading/creating user ID:', error);\n        // Fallback to a timestamp-based ID\n        const fallbackId = `user_${Date.now()}`;\n        setUserIdState(fallbackId);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const setUserId = async newId => {\n      try {\n        await AsyncStorage.default.setItem(USER_ID_KEY, newId);\n        setUserIdState(newId);\n      } catch (error) {\n        console.error('[User] Error saving user ID:', error);\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(UserContext.Provider, {\n      value: {\n        userId,\n        setUserId,\n        isLoading\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 5\n    }, this);\n  }\n  function useUser() {\n    const context = (0, _react.useContext)(UserContext);\n    if (context === undefined) {\n      throw new Error('useUser must be used within a UserProvider');\n    }\n    return context;\n  }\n  var _default = UserContext;\n});","lineCount":106,"map":[[28,2,77,0,"Object"],[28,8,77,0],[28,9,77,0,"defineProperty"],[28,23,77,0],[28,24,77,0,"exports"],[28,31,77,0],[29,4,77,0,"enumerable"],[29,14,77,0],[30,4,77,0,"get"],[30,7,77,0],[30,18,77,0,"get"],[30,19,77,0],[31,6,77,0],[31,13,77,0,"_default"],[31,21,77,0],[32,4,77,0],[33,2,77,0],[34,2,15,0,"exports"],[34,9,15,0],[34,10,15,0,"UserProvider"],[34,22,15,0],[34,25,15,0,"UserProvider"],[34,37,15,0],[35,2,69,0,"exports"],[35,9,69,0],[35,10,69,0,"useUser"],[35,17,69,0],[35,20,69,0,"useUser"],[35,27,69,0],[36,2,1,0],[36,6,1,0,"_react"],[36,12,1,0],[36,15,1,0,"require"],[36,22,1,0],[36,23,1,0,"_dependencyMap"],[36,37,1,0],[37,2,2,0],[37,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[37,42,2,0],[37,45,2,0,"require"],[37,52,2,0],[37,53,2,0,"_dependencyMap"],[37,67,2,0],[38,2,2,0],[38,6,2,0,"AsyncStorage"],[38,18,2,0],[38,21,2,0,"_interopDefault"],[38,36,2,0],[38,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[38,73,2,0],[39,2,3,0],[39,6,3,0,"_expoCrypto"],[39,17,3,0],[39,20,3,0,"require"],[39,27,3,0],[39,28,3,0,"_dependencyMap"],[39,42,3,0],[40,2,3,0],[40,6,3,0,"Crypto"],[40,12,3,0],[40,15,3,0,"_interopNamespace"],[40,32,3,0],[40,33,3,0,"_expoCrypto"],[40,44,3,0],[41,2,3,38],[41,6,3,38,"_reactJsxDevRuntime"],[41,25,3,38],[41,28,3,38,"require"],[41,35,3,38],[41,36,3,38,"_dependencyMap"],[41,50,3,38],[42,2,11,0],[42,8,11,6,"UserContext"],[42,19,11,17],[42,35,11,20],[42,39,11,20,"createContext"],[42,45,11,33],[42,46,11,33,"createContext"],[42,59,11,33],[42,61,11,63,"undefined"],[42,70,11,72],[42,71,11,73],[43,2,13,0],[43,8,13,6,"USER_ID_KEY"],[43,19,13,17],[43,22,13,20],[43,41,13,39],[44,2,15,7],[44,11,15,16,"UserProvider"],[44,23,15,28,"UserProvider"],[44,24,15,29],[45,4,15,31,"children"],[46,2,15,71],[46,3,15,72],[46,5,15,74],[47,4,16,2],[47,10,16,8],[47,11,16,9,"userId"],[47,17,16,15],[47,19,16,17,"setUserIdState"],[47,33,16,31],[47,34,16,32],[47,37,16,35],[47,41,16,35,"useState"],[47,47,16,43],[47,48,16,43,"useState"],[47,56,16,43],[47,58,16,52],[47,60,16,54],[47,61,16,55],[48,4,17,2],[48,10,17,8],[48,11,17,9,"isLoading"],[48,20,17,18],[48,22,17,20,"setIsLoading"],[48,34,17,32],[48,35,17,33],[48,38,17,36],[48,42,17,36,"useState"],[48,48,17,44],[48,49,17,44,"useState"],[48,57,17,44],[48,59,17,45],[48,63,17,49],[48,64,17,50],[49,4,19,2],[49,8,19,2,"useEffect"],[49,14,19,11],[49,15,19,11,"useEffect"],[49,24,19,11],[49,26,19,12],[49,32,19,18],[50,6,20,4,"loadOrCreateUserId"],[50,24,20,22],[50,25,20,23],[50,26,20,24],[51,4,21,2],[51,5,21,3],[51,7,21,5],[51,9,21,7],[51,10,21,8],[52,4,23,2],[52,10,23,8,"loadOrCreateUserId"],[52,28,23,26],[52,31,23,29],[52,37,23,29,"loadOrCreateUserId"],[52,38,23,29],[52,43,23,41],[53,6,24,4],[53,10,24,8],[54,8,25,6],[55,8,26,6],[55,12,26,10,"storedUserId"],[55,24,26,22],[55,27,26,25],[55,33,26,31,"AsyncStorage"],[55,45,26,43],[55,46,26,43,"default"],[55,53,26,43],[55,54,26,44,"getItem"],[55,61,26,51],[55,62,26,52,"USER_ID_KEY"],[55,73,26,63],[55,74,26,64],[56,8,28,6],[56,12,28,10],[56,13,28,11,"storedUserId"],[56,25,28,23],[56,27,28,25],[57,10,29,8],[58,10,30,8],[58,16,30,14,"randomBytes"],[58,27,30,25],[58,30,30,28],[58,36,30,34,"Crypto"],[58,42,30,40],[58,43,30,41,"getRandomBytesAsync"],[58,62,30,60],[58,63,30,61],[58,65,30,63],[58,66,30,64],[59,10,31,8,"storedUserId"],[59,22,31,20],[59,25,31,23,"Array"],[59,30,31,28],[59,31,31,29,"from"],[59,35,31,33],[59,36,31,34,"randomBytes"],[59,47,31,45],[59,48,31,46],[59,49,32,11,"map"],[59,52,32,14],[59,53,32,15,"b"],[59,54,32,16],[59,58,32,20,"b"],[59,59,32,21],[59,60,32,22,"toString"],[59,68,32,30],[59,69,32,31],[59,71,32,33],[59,72,32,34],[59,73,32,35,"padStart"],[59,81,32,43],[59,82,32,44],[59,83,32,45],[59,85,32,47],[59,88,32,50],[59,89,32,51],[59,90,32,52],[59,91,33,11,"join"],[59,95,33,15],[59,96,33,16],[59,98,33,18],[59,99,33,19],[61,10,35,8],[62,10,36,8],[62,16,36,14,"AsyncStorage"],[62,28,36,26],[62,29,36,26,"default"],[62,36,36,26],[62,37,36,27,"setItem"],[62,44,36,34],[62,45,36,35,"USER_ID_KEY"],[62,56,36,46],[62,58,36,48,"storedUserId"],[62,70,36,60],[62,71,36,61],[63,10,37,8,"console"],[63,17,37,15],[63,18,37,16,"log"],[63,21,37,19],[63,22,37,20],[63,51,37,49],[63,53,37,51,"storedUserId"],[63,65,37,63],[63,66,37,64],[64,8,38,6],[64,9,38,7],[64,15,38,13],[65,10,39,8,"console"],[65,17,39,15],[65,18,39,16,"log"],[65,21,39,19],[65,22,39,20],[65,55,39,53],[65,57,39,55,"storedUserId"],[65,69,39,67],[65,70,39,68],[66,8,40,6],[67,8,42,6,"setUserIdState"],[67,22,42,20],[67,23,42,21,"storedUserId"],[67,35,42,33],[67,36,42,34],[68,6,43,4],[68,7,43,5],[68,8,43,6],[68,15,43,13,"error"],[68,20,43,18],[68,22,43,20],[69,8,44,6,"console"],[69,15,44,13],[69,16,44,14,"error"],[69,21,44,19],[69,22,44,20],[69,62,44,60],[69,64,44,62,"error"],[69,69,44,67],[69,70,44,68],[70,8,45,6],[71,8,46,6],[71,14,46,12,"fallbackId"],[71,24,46,22],[71,27,46,25],[71,35,46,33,"Date"],[71,39,46,37],[71,40,46,38,"now"],[71,43,46,41],[71,44,46,42],[71,45,46,43],[71,47,46,45],[72,8,47,6,"setUserIdState"],[72,22,47,20],[72,23,47,21,"fallbackId"],[72,33,47,31],[72,34,47,32],[73,6,48,4],[73,7,48,5],[73,16,48,14],[74,8,49,6,"setIsLoading"],[74,20,49,18],[74,21,49,19],[74,26,49,24],[74,27,49,25],[75,6,50,4],[76,4,51,2],[76,5,51,3],[77,4,53,2],[77,10,53,8,"setUserId"],[77,19,53,17],[77,22,53,20],[77,28,53,27,"newId"],[77,33,53,40],[77,37,53,45],[78,6,54,4],[78,10,54,8],[79,8,55,6],[79,14,55,12,"AsyncStorage"],[79,26,55,24],[79,27,55,24,"default"],[79,34,55,24],[79,35,55,25,"setItem"],[79,42,55,32],[79,43,55,33,"USER_ID_KEY"],[79,54,55,44],[79,56,55,46,"newId"],[79,61,55,51],[79,62,55,52],[80,8,56,6,"setUserIdState"],[80,22,56,20],[80,23,56,21,"newId"],[80,28,56,26],[80,29,56,27],[81,6,57,4],[81,7,57,5],[81,8,57,6],[81,15,57,13,"error"],[81,20,57,18],[81,22,57,20],[82,8,58,6,"console"],[82,15,58,13],[82,16,58,14,"error"],[82,21,58,19],[82,22,58,20],[82,52,58,50],[82,54,58,52,"error"],[82,59,58,57],[82,60,58,58],[83,6,59,4],[84,4,60,2],[84,5,60,3],[85,4,62,2],[85,24,63,4],[85,28,63,4,"_reactJsxDevRuntime"],[85,47,63,4],[85,48,63,4,"jsxDEV"],[85,54,63,4],[85,56,63,5,"UserContext"],[85,67,63,16],[85,68,63,17,"Provider"],[85,76,63,25],[86,6,63,26,"value"],[86,11,63,31],[86,13,63,33],[87,8,63,35,"userId"],[87,14,63,41],[88,8,63,43,"setUserId"],[88,17,63,52],[89,8,63,54,"isLoading"],[90,6,63,64],[90,7,63,66],[91,6,63,66,"children"],[91,14,63,66],[91,16,64,7,"children"],[92,4,64,15],[93,6,64,15,"fileName"],[93,14,64,15],[93,16,64,15,"_jsxFileName"],[93,28,64,15],[94,6,64,15,"lineNumber"],[94,16,64,15],[95,6,64,15,"columnNumber"],[95,18,64,15],[96,4,64,15],[96,11,65,26],[96,12,65,27],[97,2,67,0],[98,2,69,7],[98,11,69,16,"useUser"],[98,18,69,23,"useUser"],[98,19,69,23],[98,21,69,26],[99,4,70,2],[99,10,70,8,"context"],[99,17,70,15],[99,20,70,18],[99,24,70,18,"useContext"],[99,30,70,28],[99,31,70,28,"useContext"],[99,41,70,28],[99,43,70,29,"UserContext"],[99,54,70,40],[99,55,70,41],[100,4,71,2],[100,8,71,6,"context"],[100,15,71,13],[100,20,71,18,"undefined"],[100,29,71,27],[100,31,71,29],[101,6,72,4],[101,12,72,10],[101,16,72,14,"Error"],[101,21,72,19],[101,22,72,20],[101,66,72,64],[101,67,72,65],[102,4,73,2],[103,4,74,2],[103,11,74,9,"context"],[103,18,74,16],[104,2,75,0],[105,2,77,0],[105,6,77,0,"_default"],[105,14,77,0],[105,17,77,15,"UserContext"],[105,28,77,26],[106,0,77,27],[106,3]],"functionMap":{"names":["<global>","UserProvider","useEffect$argument_0","loadOrCreateUserId","Array.from.map$argument_0","setUserId","useUser"],"mappings":"AAA;OCc;YCI;GDE;6BEE;eCS,oCD;GFmB;oBIE;GJO;CDO;OME;CNM"},"hasCjsExports":false},"type":"js/module"}]}